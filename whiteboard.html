<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Advanced Whiteboard</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f4f4f4;
    }
    .whiteboard-container {
      display: flex;
      height: 100vh;
      width: 100vw;
    }
    .sidebar {
      background: #fff;
      width: 80px;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px 0;
      border-right: 2px solid #eee;
      position: relative;
    }
    .tool-btn, .sketch-btn {
      margin: 10px 0;
      padding: 8px;
      width: 48px;
      height: 48px;
      border: none;
      background: #e9e9e9;
      border-radius: 8px;
      cursor: pointer;
      font-size: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }
    .tool-btn.active, .sketch-btn.active {
      background: #b2e5ff;
    }
    .sidebar-bottom {
      position: absolute;
      bottom: 40px;
      left: 0;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .main-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      position: relative;
      background: #f4f4f4;
    }
    .top-bar {
      width: 80%;
      text-align: center;
      margin: 24px auto 10px auto;
    }
    .mode-switch {
      display: inline-block;
    }
    .mode-switch label {
      font-weight: bold;
      margin: 0 8px;
      font-size: 15px;
    }
    .slides-bar {
      position: absolute;
      top: 24px;
      right: 44px;
      display: flex;
      gap: 10px;
    }
    .slide-btn {
      padding: 7px 13px;
      border: none;
      margin-right: 4px;
      background: #f0f0f0;
      color: #444;
      border-radius: 7px;
      cursor: pointer;
      font-size: 14px;
    }
    .slide-btn.active {
      background: #d1f5d3;
      color: #187718;
    }
    .canvas-frame {
      background: #fff;
      border-radius: 13px;
      box-shadow: 0 2px 10px #ccc;
      overflow: hidden;
    }
    #canvas {
      background: #fff;
      cursor: crosshair;
      display: block;
      margin: 0;
    }
    .text-color-selector {
      width: 40px;
      margin: 0 6px;
    }
    .add-text-bar, .edit-bar {
      margin: 10px 0 0 0;
      text-align: left;
    }
  </style>
</head>
<body>
  <div class="whiteboard-container">
    <div class="sidebar">
      <!-- Tool Buttons -->
      <button class="tool-btn" id="drawBtn" title="Free Draw 🖊️">🖊️</button>
      <button class="tool-btn" id="textBtn" title="Text Tool 🅰️">🅰️</button>
      <button class="tool-btn" id="eraseBtn" title="Eraser 🧽">🧽</button>
      <button class="tool-btn" id="clearBtn" title="Clear All">🗑️</button>
      <div class="add-text-bar" id="textOptions" style="display: none;">
        <input type="color" id="textColor" class="text-color-selector" title="Text Color" value="#000000"/>
        <input id="textInput" type="text" placeholder="Type text" style="width: 50px;" />
      </div>
      <div class="edit-bar" id="drawOptions" style="display: none;">
        <input type="color" id="drawColor" class="text-color-selector" title="Pen Color" value="#000000"/>
      </div>
      <!-- Sketch Icons (bottom) -->
      <div class="sidebar-bottom">
        <button class="sketch-btn" title="Tree">🌳</button>
        <button class="sketch-btn" title="Cake">🎂</button>
        <button class="sketch-btn" title="Bench">🛋️</button>
        <button class="sketch-btn" title="Phone">📱</button>
        <button class="sketch-btn" title="Headphones">🎧</button>
        <button class="sketch-btn" title="Key">🔑</button>
        <button class="sketch-btn" title="Home">🏠</button>
        <button class="sketch-btn" title="House">🏡</button>
        <button class="sketch-btn" title="Fruits">🍉</button>
        <button class="sketch-btn" title="Vegetable">🥦</button>
        <button class="sketch-btn" title="Human">🧑</button>
        <button class="sketch-btn" title="City">🏙️</button>
        <button class="sketch-btn" title="Nature">🌄</button>
      </div>
    </div>
    <div class="main-area">
      <div class="top-bar">
        <div class="mode-switch">
          <label>View</label>
          <label class="switch">
            <input type="checkbox" id="modeSwitch">
            <span class="slider round"></span>
          </label>
          <label>Edit</label>
        </div>
      </div>
      <div class="slides-bar" id="slidesBar">
        <button class="slide-btn active">1</button>
        <button class="slide-btn">+</button>
      </div>
      <div class="canvas-frame">
        <canvas id="canvas" width="900" height="540"></canvas>
      </div>
    </div>
  </div>
  <script>
    // Canvas and slides logic
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let drawing = false;
    let currentTool = 'draw';
    let currentColor = '#000000';
    let mode = 'edit';
    let slides = [{ image: null }];
    let currentSlide = 0;

    function redrawSlide() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      if (slides[currentSlide].image) {
        let img = new window.Image();
        img.src = slides[currentSlide].image;
        img.onload = () => ctx.drawImage(img, 0, 0);
      }
    }

    function saveSlide() {
      slides[currentSlide].image = canvas.toDataURL();
    }

    document.getElementById('drawBtn').onclick = () => {
      currentTool = 'draw';
      document.getElementById('drawOptions').style.display = 'block';
      document.getElementById('textOptions').style.display = 'none';
      setActiveBtn('drawBtn');
    };
    document.getElementById('textBtn').onclick = () => {
      currentTool = 'text';
      document.getElementById('textOptions').style.display = 'block';
      document.getElementById('drawOptions').style.display = 'none';
      setActiveBtn('textBtn');
    };
    document.getElementById('eraseBtn').onclick = () => {
      currentTool = 'erase';
      document.getElementById('drawOptions').style.display = 'block';
      document.getElementById('textOptions').style.display = 'none';
      setActiveBtn('eraseBtn');
    };
    document.getElementById('clearBtn').onclick = () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      saveSlide();
    };

    // Drawing
    canvas.onmousedown = (e) => {
      if (mode !== 'edit' || currentTool === 'text') return;
      drawing = true;
      ctx.beginPath();
      ctx.moveTo(e.offsetX, e.offsetY);
    };
    canvas.onmousemove = (e) => {
      if (!drawing) return;
      if (currentTool === 'draw') {
        ctx.strokeStyle = document.getElementById('drawColor').value;
        ctx.lineWidth = 2;
        ctx.lineTo(e.offsetX, e.offsetY);
        ctx.stroke();
      } else if (currentTool === 'erase') {
        ctx.strokeStyle = "#fff";
        ctx.lineWidth = 15;
        ctx.lineTo(e.offsetX, e.offsetY);
        ctx.stroke();
      }
    };
    canvas.onmouseup = () => { drawing = false; saveSlide(); };

    // Text tool
    canvas.onclick = (e) => {
      if (currentTool !== 'text' || mode !== 'edit') return;
      const text = document.getElementById('textInput').value || 'Text';
      ctx.fillStyle = document.getElementById('textColor').value;
      ctx.font = "22px Arial";
      ctx.fillText(text, e.offsetX, e.offsetY);
      saveSlide();
    };

    document.getElementById('drawColor').oninput = (e) => currentColor = e.target.value;

    // Set active tool button
    function setActiveBtn(btnId) {
      ['drawBtn', 'textBtn', 'eraseBtn'].forEach(id => {
        document.getElementById(id).classList.toggle('active', id === btnId);
      });
    }
    setActiveBtn('drawBtn');

    // Slides logic
    const slidesBar = document.getElementById('slidesBar');
    slidesBar.onclick = (e) => {
      if (e.target.classList.contains('slide-btn')) {
        if (e.target.textContent === '+') {
          slides.push({ image: null });
          updateSlidesBar();
          setSlide(slides.length - 1);
        } else {
          setSlide(parseInt(e.target.textContent) - 1);
        }
      }
    };
    function setSlide(idx) {
      saveSlide();
      currentSlide = idx;
      redrawSlide();
      updateSlidesBar();
    }
    function updateSlidesBar() {
      slidesBar.innerHTML = '';
      slides.forEach((slide, i) => {
        let btn = document.createElement('button');
        btn.className = 'slide-btn' + (i === currentSlide ? ' active' : '');
        btn.textContent = (i + 1);
        slidesBar.appendChild(btn);
      });
      let plusBtn = document.createElement('button');
      plusBtn.className = 'slide-btn';
      plusBtn.textContent = '+';
      slidesBar.appendChild(plusBtn);
    }

    // Mode switch
    document.getElementById('modeSwitch').onchange = function() {
      mode = this.checked ? 'edit' : 'view';
      canvas.style.pointerEvents = mode === 'edit' ? '' : 'none';
    };

    // Sketch icon buttons (paste PNG/SVG at coords)
    document.querySelectorAll('.sidebar-bottom .sketch-btn').forEach((btn, i) => {
      btn.onclick = () => {
        if (mode !== 'edit') return;
        ctx.font = '36px Arial';
        ctx.fillText(btn.textContent, Math.floor(Math.random()*700+100), Math.floor(Math.random()*420+60));
        saveSlide();
      }
    });

    // Initial update
    updateSlidesBar();
  </script>
  <!-- Toggle Switch CSS -->
  <style>
    .switch {
      position: relative;
      display: inline-block;
      width: 48px;
      height: 26px;
      vertical-align: middle;
    }
    .switch input {opacity: 0;width: 0;height: 0;}
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;left: 0;right: 0;bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 26px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 20px;
      width: 20px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    input:checked + .slider {
      background-color: #0fa;
    }
    input:checked + .slider:before {
      transform: translateX(22px);
    }
    .slider.round {border-radius: 26px;}
    .slider.round:before {border-radius: 50%;}
  </style>
</body>
</html>
